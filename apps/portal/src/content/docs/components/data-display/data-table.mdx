---
title: Data Table
description: Data table component with sorting, selection, and expansion capabilities
beta: true
---

The `Data Table` component provides a powerful way to display and interact with tabular data, featuring row selection, expansion, sorting, and custom cell rendering. Built on TanStack Table, it offers a comprehensive solution for complex data display needs.

import { DocsPage } from "@/components/docs-page";
import { Aside } from "@astrojs/starlight/components";

<DocsPage.ComponentExample
  client:only
  code={`() => {
  const users = [
    { name: 'John Doe', email: 'john@example.com', status: 'active' },
    { name: 'Jane Smith', email: 'jane@example.com', status: 'active' },
    { name: 'Bob Johnson', email: 'bob@example.com', status: 'inactive' }
  ]

const [expanded, setExpanded] = React.useState<ExpandedState>({})
const [rowSelection, setRowSelection] = React.useState<RowSelectionState>({})
const [tableSorting, setTableSorting] = React.useState<SortingState>([])

const columns = [
{
accessorKey: 'name',
header: 'Name',
enableSorting: true
},
{
accessorKey: 'email',
header: 'Email',
enableSorting: false
},
{
accessorKey: 'status',
header: 'Status'
}
]

const sortedData = [...users].sort((a, b) => {
if (tableSorting.length === 0) return 0

    const sort = tableSorting[0]
    const key = sort.id as keyof User

    if (a[key] < b[key]) return sort.desc ? 1 : -1
    if (a[key] > b[key]) return sort.desc ? -1 : 1
    return 0

})

const renderSubComponent = ({ row }) => {
const user = row.original
return (

<div>
  <p>This is a placeholder for expanded content for {user.name}</p>
</div>
) }

return (

<DataTable
  columns={columns}
  data={sortedData}
  getRowId={(row) => row.email}
  size="compact"
  enableRowSelection
  enableExpanding
  renderSubComponent={renderSubComponent}
  currentExpanded={expanded}
  onExpandedChange={setExpanded}
  currentRowSelection={rowSelection}
  onRowSelectionChange={setRowSelection}
  currentSorting={tableSorting}
  onSortingChange={setTableSorting}
  getRowCanExpand={(row) => row.original.status === "active"}
  getRowCanSelect={(row) => row.original.status === "active"}
  paginationProps={{
    pageSize: 10,
    totalItems: 50,
    currentPage: 1,
    goToPage: (page) => console.log(page),
    pageSizeOptions: [5, 10, 20],
    onPageSizeChange: (size) => console.log(size),
  }}
/>
) }`} />

## Column Filter Demo

<DocsPage.ComponentExample
  client:only
  code={`() => {
  const users = [
    { name: 'John Doe', email: 'john@example.com', status: 'active', role: 'Admin', createdAt: '2024-01-15' },
    { name: 'Jane Smith', email: 'jane@example.com', status: 'active', role: 'User', createdAt: '2024-02-20' },
    { name: 'Bob Johnson', email: 'bob@example.com', status: 'inactive', role: 'User', createdAt: '2024-03-10' },
    { name: 'Alice Williams', email: 'alice@example.com', status: 'active', role: 'Manager', createdAt: '2024-01-25' }
  ]

// Define column options for the filter dropdown
const COLUMN_OPTIONS = [
{ label: 'Name', value: 'name' },
{ label: 'Email', value: 'email' },
{ label: 'Status', value: 'status' },
{ label: 'Role', value: 'role' },
{ label: 'Created At', value: 'createdAt' }
]

// Use the column filter hook with localStorage persistence
const { visibleColumns, toggleColumn, resetColumns } = useColumnFilter({
storageKey: 'demo-table-columns',
columns: COLUMN_OPTIONS,
defaultVisibleColumns: ['name', 'email', 'status'] // Hide role and createdAt by default
})

// Define columns with enableHiding and unique IDs
const columns = [
{
id: 'name',
accessorKey: 'name',
header: 'Name',
enableHiding: true,
enableSorting: true
},
{
id: 'email',
accessorKey: 'email',
header: 'Email',
enableHiding: true
},
{
id: 'status',
accessorKey: 'status',
header: 'Status',
enableHiding: true,
cell: (info) => (

<StatusBadge
theme={info.getValue() === 'active' ? 'success' : 'default'}
size="sm"
>
{info.getValue()}
</StatusBadge>
)
},
{
id: 'role',
accessorKey: 'role',
header: 'Role',
enableHiding: true
},
{
id: 'createdAt',
accessorKey: 'createdAt',
header: 'Created At',
enableHiding: true
}
]

const [tableSorting, setTableSorting] = React.useState([])

const sortedData = [...users].sort((a, b) => {
if (tableSorting.length === 0) return 0
const sort = tableSorting[0]
const key = sort.id
if (a[key] < b[key]) return sort.desc ? 1 : -1
if (a[key] > b[key]) return sort.desc ? -1 : 1
return 0
})

return (

<Layout.Vertical gap="md">
<Layout.Flex justify="between" align="center">
<Text variant="body-normal">
Showing {visibleColumns.length} of {COLUMN_OPTIONS.length} columns
</Text>
<DataTable.ColumnFilter
columns={COLUMN_OPTIONS}
visibleColumns={visibleColumns}
onCheckedChange={toggleColumn}
onReset={resetColumns}
/>
</Layout.Flex>

      <DataTable
        columns={columns}
        data={sortedData}
        visibleColumns={visibleColumns}
        getRowId={(row) => row.email}
        size="compact"
        currentSorting={tableSorting}
        onSortingChange={setTableSorting}
      />
    </Layout.Vertical>

)
}`} />

## Anatomy

```jsx
<DataTable
  columns={columns} // Column definitions
  data={data} // Data to display
  size="normal" // Size variant
  getRowId={(row) => row.id} // Function to get unique row ID
  enableRowSelection // Enable row selection
  enableExpanding // Enable row expansion
  renderSubComponent={renderSubComponent} // Render expanded content
  currentSorting={sorting} // Current sorting state
  onSortingChange={setSorting} // Sorting change handler
  pagination={paginationProps} // Pagination configuration
/>
```

## Usage

```tsx
import { DataTable } from "@harnessio/ui/components";
import { useState } from "react";
import type {
  ColumnDef,
  SortingState,
  RowSelectionState,
  ExpandedState,
} from "@tanstack/react-table";

// Define your data type
type User = {
  name: string;
  email: string;
  status: "active" | "inactive";
};

// Define your columns
const columns: ColumnDef<User>[] = [
  {
    accessorKey: "name",
    header: "Name",
    enableSorting: true,
  },
  {
    accessorKey: "email",
    header: "Email",
  },
  {
    accessorKey: "status",
    header: "Status",
  },
];

function MyTable() {
  // State for sorting, selection, and expansion
  const [sorting, setSorting] = useState<SortingState>([]);
  const [rowSelection, setRowSelection] = useState<RowSelectionState>({});
  const [expanded, setExpanded] = useState<ExpandedState>({});

  // Your data
  const data = [
    { name: "John Doe", email: "john@example.com", status: "active" },
    { name: "Jane Smith", email: "jane@example.com", status: "inactive" },
  ];

  return (
    <DataTable
      columns={columns}
      data={data}
      getRowId={(row) => row.email}
      currentSorting={sorting}
      onSortingChange={setSorting}
      enableRowSelection
      currentRowSelection={rowSelection}
      onRowSelectionChange={setRowSelection}
      enableExpanding
      currentExpanded={expanded}
      onExpandedChange={setExpanded}
      renderSubComponent={({ row }) => (
        <div className="p-cn-md">
          <p>Additional details for {row.original.name}</p>
        </div>
      )}
    />
  );
}
```

## Props

<DocsPage.PropsTable
  props={[
    {
      name: "data",
      description: "Array of data items to display in the table",
      required: true,
      value: "TData[]",
    },
    {
      name: "columns",
      description:
        "Column definitions following TanStack Table's ColumnDef format",
      required: true,
      value: "ColumnDef<TData, unknown>[]",
    },
    {
      name: "size",
      description: "Size variant of the table",
      required: false,
      value: "'normal' | 'relaxed' | 'compact'",
      defaultValue: "'normal'",
    },
    {
      name: "getRowId",
      description: "Function to get a unique ID for each row",
      required: false,
      value: "(row: TData) => string",
    },
    {
      name: "paginationProps",
      description: "Pagination configuration",
      required: false,
      value: "PaginationProps",
    },
    {
      name: "getRowClassName",
      description: "Function to apply custom class names to rows",
      required: false,
      value: "(row: Row<TData>) => string | undefined",
    },
    {
      name: "onRowClick",
      description: "Callback function when a row is clicked",
      required: false,
      value: "(data: TData, index: number) => void",
    },
    {
      name: "disableHighlightOnHover",
      description: "Disable row highlighting on hover",
      required: false,
      value: "boolean",
    },
    {
      name: "className",
      description: "Custom class name for the table container",
      required: false,
      value: "string",
    },
    {
      name: "currentSorting",
      description: "Current sorting state",
      required: false,
      value: "SortingState",
    },
    {
      name: "onSortingChange",
      description: "Callback for when sorting changes",
      required: false,
      value: "OnChangeFn<SortingState>",
    },
    {
      name: "enableRowSelection",
      description: "Enable row selection functionality",
      required: false,
      value: "boolean",
    },
    {
      name: "currentRowSelection",
      description: "Current row selection state",
      required: false,
      value: "RowSelectionState",
    },
    {
      name: "onRowSelectionChange",
      description: "Callback for when row selection changes",
      required: false,
      value: "OnChangeFn<RowSelectionState>",
    },
    {
      name: "enableExpanding",
      description: "Enable row expansion functionality",
      required: false,
      value: "boolean",
    },
    {
      name: "getRowCanExpand",
      description: "Function to determine if a row can be expanded",
      required: false,
      value: "(row: Row<TData>) => boolean",
    },
    {
      name: "getRowCanSelect",
      description: "Function to determine if a row can be selected",
      required: false,
      value: "(row: Row<TData>) => boolean",
    },
    {
      name: "currentExpanded",
      description: "Current expanded rows state",
      required: false,
      value: "ExpandedState",
    },
    {
      name: "onExpandedChange",
      description: "Callback for when expanded state changes",
      required: false,
      value: "OnChangeFn<ExpandedState>",
    },
    {
      name: "renderSubComponent",
      description: "Render function for expanded row content",
      required: false,
      value: "(props: { row: Row<TData> }) => React.ReactNode",
    },
    {
      name: "enableColumnResizing",
      description: "Enable column resizing functionality",
      required: false,
      value: "boolean",
    },
    {
      name: "visibleColumns",
      description:
        "Array of column IDs to control which columns are visible. Columns must have 'enableHiding: true' to be controlled by this prop.",
      required: false,
      value: "string[]",
    },
  ]}
/>

## DataTable.ColumnFilter Component

The `DataTable.ColumnFilter` is a sub-component that provides a dropdown menu for toggling column visibility.

### Props

<DocsPage.PropsTable
  props={[
    {
      name: "columns",
      description: "Array of column options with label and value pairs",
      required: true,
      value: "CheckboxOptions[]",
    },
    {
      name: "visibleColumns",
      description: "Array of currently visible column IDs",
      required: true,
      value: "string[]",
    },
    {
      name: "onCheckedChange",
      description: "Callback when a column's visibility is toggled",
      required: true,
      value: "(columnName: string, checked: boolean) => void",
    },
    {
      name: "onReset",
      description:
        "Optional callback to reset columns to default. When provided, shows a Reset button in the dropdown footer",
      required: false,
      value: "() => void",
    },
  ]}
/>

## useColumnFilter Hook

The `useColumnFilter` hook manages column visibility state with automatic localStorage persistence.

### Parameters

<DocsPage.PropsTable
  props={[
    {
      name: "storageKey",
      description: "Unique key for localStorage persistence",
      required: true,
      value: "string",
    },
    {
      name: "columns",
      description: "Available columns configuration",
      required: true,
      value: "CheckboxOptions[]",
    },
    {
      name: "defaultVisibleColumns",
      description:
        "Default visible columns when no localStorage value exists. If not provided, all columns are visible by default",
      required: false,
      value: "string[]",
    },
  ]}
/>

### Return Value

<DocsPage.PropsTable
  props={[
    {
      name: "visibleColumns",
      description: "Currently visible column identifiers",
      required: false,
      value: "string[]",
    },
    {
      name: "toggleColumn",
      description: "Function to toggle visibility of a specific column",
      required: false,
      value: "(columnName: string, checked: boolean) => void",
    },
    {
      name: "resetColumns",
      description: "Function to reset to default visible columns",
      required: false,
      value: "() => void",
    },
  ]}
/>

## Examples

### Table with Custom Cell Rendering

```tsx
import { DataTable, StatusBadge } from "@harnessio/ui/components";

const columns = [
  {
    accessorKey: "name",
    header: "Name",
  },
  {
    accessorKey: "status",
    header: "Status",
    cell: (info) => (
      <StatusBadge
        theme={info.getValue() === "active" ? "success" : "danger"}
        size="sm"
      >
        {info.getValue()}
      </StatusBadge>
    ),
  },
];
```

### Table with Conditional Row Selection

```tsx
<DataTable
  columns={columns}
  data={data}
  enableRowSelection
  getRowCanSelect={(row) => row.original.status === "active"}
  currentRowSelection={rowSelection}
  onRowSelectionChange={setRowSelection}
/>
```

### Table with Column Visibility Control

The DataTable component provides a built-in column filter dropdown (`DataTable.ColumnFilter`) and a hook (`useColumnFilter`) for managing column visibility with localStorage persistence.

#### Using the Built-in Column Filter (Recommended)

```tsx
import { DataTable } from "@harnessio/ui/components";
import { useColumnFilter } from "@harnessio/ui/hooks";
import type { CheckboxOptions } from "@harnessio/ui/components";

// Define columns with enableHiding and unique IDs
const columns = [
  {
    id: "name",
    accessorKey: "name",
    header: "Name",
    enableHiding: true,
  },
  {
    id: "email",
    accessorKey: "email",
    header: "Email",
    enableHiding: true,
  },
  {
    id: "status",
    accessorKey: "status",
    header: "Status",
    enableHiding: true,
  },
  {
    id: "createdAt",
    accessorKey: "createdAt",
    header: "Created At",
    enableHiding: true,
  },
];

// Define column options for the filter dropdown
const COLUMN_OPTIONS: CheckboxOptions[] = [
  { label: "Name", value: "name" },
  { label: "Email", value: "email" },
  { label: "Status", value: "status" },
  { label: "Created At", value: "createdAt" },
];

function TableWithColumnFilter() {
  // Use the column filter hook with localStorage persistence
  const { visibleColumns, toggleColumn, resetColumns } = useColumnFilter({
    storageKey: "my-table-columns", // Unique key for localStorage
    columns: COLUMN_OPTIONS,
    defaultVisibleColumns: ["name", "email", "status"], // Default visible columns
  });

  const data = [
    {
      name: "John Doe",
      email: "john@example.com",
      status: "active",
      createdAt: "2024-01-15",
    },
    {
      name: "Jane Smith",
      email: "jane@example.com",
      status: "inactive",
      createdAt: "2024-02-20",
    },
  ];

  return (
    <>
      {/* Column filter dropdown */}
      <DataTable.ColumnFilter
        columns={COLUMN_OPTIONS}
        visibleColumns={visibleColumns}
        onCheckedChange={toggleColumn}
        onReset={resetColumns}
      />

      {/* DataTable with visible columns */}
      <DataTable
        columns={columns}
        data={data}
        visibleColumns={visibleColumns}
      />
    </>
  );
}
```

#### Manual Column Visibility Control

You can also manually control column visibility without using the hook:

```tsx
import { DataTable } from "@harnessio/ui/components";
import { useState } from "react";

function TableWithManualColumnControl() {
  const [visibleColumns, setVisibleColumns] = useState([
    "name",
    "email",
    "status",
  ]);

  const handleColumnToggle = (columnId: string, checked: boolean) => {
    if (checked) {
      setVisibleColumns([...visibleColumns, columnId]);
    } else {
      setVisibleColumns(visibleColumns.filter((id) => id !== columnId));
    }
  };

  const handleReset = () => {
    setVisibleColumns(["name", "email", "status"]);
  };

  return (
    <>
      <DataTable.ColumnFilter
        columns={COLUMN_OPTIONS}
        visibleColumns={visibleColumns}
        onCheckedChange={handleColumnToggle}
        onReset={handleReset}
      />

      <DataTable
        columns={columns}
        data={data}
        visibleColumns={visibleColumns}
      />
    </>
  );
}
```

<Aside type="tip">
  **Key Points:** - Each column must have a unique `id` that matches the values
  in `COLUMN_OPTIONS` - Set `enableHiding: true` on columns you want to be
  toggleable - The `useColumnFilter` hook automatically persists preferences to
  localStorage - The `onReset` prop is optional and adds a "Reset" button to the
  dropdown footer
</Aside>

<Aside type="note">
  The `visibleColumns` prop accepts an array of column IDs. Only columns with
  IDs present in this array will be displayed in the table.
</Aside>
